- "ZoD = areaFaccia * v * rho;"
- "Zel = 1E+06; %1MOhm"
- "selezioneZ1 = obj.App.TabController.getTab('ImpedenzeTab').getComponent('MenuZ1').Value"
- "selezioneZ2 = obj.App.TabController.getTab('ImpedenzeTab').getComponent('MenuZ2').Value"
- "keyMap = caricaStrutturaImpedenzeAcustiche();"
- "z1 = keyMap(string(selezioneZ1));"
- "z2 = keyMap(string(selezioneZ2));"
- "Z1 = areaFaccia * z1;"
- "Z2 = areaFaccia * z2;"
- "A = calcolaMatriceA(ZoD, omega, v, l, h33, C0);"
- "B_side1 = calcolaMatriceB(A, Z2);"
- "B_side2 = calcolaMatriceB(A, Z1);"
- "numberOfCeramicPairs = obj.App.TabController.getTab('CeramicsTab').getComponent('CampoCoppie').Value;"
- "new_l = l / (2 ^ numberOfCeramicPairs); new_C0 = (2 ^ numberOfCeramicPairs) * C0;"
- "if (new_l <= 1e-6); obj.App.showError('Lo spessore della singola ceramica Ã¨ assimilabile a zero. Per favore, scegliere un numero di coppie di ceramiche inferiore'); return; end"
- "A_couple = calcolaMatriceA(ZoD, omega, v, new_l, h33, new_C0);"
- "G = calcolaMatriceG(A_couple, A_couple);"
- "G_multiple = G;"
- "if (numberOfCeramicPairs > 1) for n = 1 : (numberOfCeramicPairs-1) G_multiple = calcolaMatriceG(G_multiple, G_multiple); end; G = G_multiple; end;"
- "B_couple_side1 = calcolaMatriceB(G, Z2);"
- "B_couple_side2 = calcolaMatriceB(G, Z1);"
- "[Zin_side1, FTT_side1, FTR_side1] = calcolaFunzioniDiTrasferimento(B_side1, Z1, Zel);"
- "[Zin_side2, FTT_side2, FTR_side2] = calcolaFunzioniDiTrasferimento(B_side2, Z2, Zel);"
- "[Zin_couple_side1, FTT_couple_side1, FTR_couple_side1] = calcolaFunzioniDiTrasferimento(B_couple_side1, Z1, Zel);"
- "[Zin_couple_side2, FTT_couple_side2, FTR_couple_side2] = calcolaFunzioniDiTrasferimento(B_couple_side2, Z2, Zel);"
- 'if(Z1 == Z2) var_z = "Impedance Comparing"; var_FTT = "TTF Comparing"; var_FTR = "RTF Comparing"; else var_z = "Impedance Comparing"; var_FTT = "TTF side 1 Comparing"; var_FTR = "RTF side 1 Comparing"; end'
- "l_scaled = l * 1e+03;"
- "new_l_scaled = new_l * 1e+03;"
- 'additionalDescriptions = " of " + string(l_scaled) + " [mm] thick ceramic";'
- 'additionalDescriptionsCouple = " of " + string(numberOfCeramicPairs) + " pair of " + string(new_l_scaled) + " [mm] thick ceramics";'
- "index_min = (Zin_side1{1} == min(Zin_side1{1}));"
- "index_max = (Zin_side1{1} == max(Zin_side1{1}));"
- "fmin = f(1,index_min);"
- "fmax = f(1,index_max);"
- "Keff_custom = ((fmax^2) - (fmin^2))/(fmax^2);"
#
# Esercizio su mezzi standard
#
- "z1_aria = 414.5;"
- "z2_aria = 414.5;"
- "Z1_aria = areaFaccia * z1_aria;"
- "Z2_aria = areaFaccia * z2_aria;"
- "B_side1_aria = calcolaMatriceB(A, Z2_aria);"
- "B_side2_aria = calcolaMatriceB(A, Z1_aria);"
- "B_couple_side1_aria = calcolaMatriceB(G, Z2_aria);"
- "B_couple_side2_aria = calcolaMatriceB(G, Z1_aria);"
- "[Zin_side1_aria, FTT_side1_aria, FTR_side1_aria] = calcolaFunzioniDiTrasferimento(B_side1_aria, Z1_aria, Zel);"
- "[Zin_side2_aria, FTT_side2_aria, FTR_side2_aria] = calcolaFunzioniDiTrasferimento(B_side2_aria, Z2_aria, Zel);"
- "[Zin_couple_side1_aria, FTT_couple_side1_aria, FTR_couple_side1_aria] = calcolaFunzioniDiTrasferimento(B_couple_side1_aria, Z1_aria, Zel);"
- "[Zin_couple_side2_aria, FTT_couple_side2_aria, FTR_couple_side2_aria] = calcolaFunzioniDiTrasferimento(B_couple_side2_aria, Z2_aria, Zel);"
- "index_min = (Zin_side1_aria{1} == min(Zin_side1_aria{1}));"
- "index_max = (Zin_side1_aria{1} == max(Zin_side1_aria{1}));"
- "fmin = f(1,index_min);"
- "fmax = f(1,index_max);"
- "Keff_aria = ((fmax^2) - (fmin^2))/(fmax^2);"
- "z1_acqua = 1479036;"
- "z2_acqua = 1479036;"
- "Z1_acqua = areaFaccia * z1_acqua;"
- "Z2_acqua = areaFaccia * z2_acqua;"
- "B_side1_acqua = calcolaMatriceB(A, Z2_acqua);"
- "B_side2_acqua = calcolaMatriceB(A, Z1_acqua);"
- "B_couple_side1_acqua = calcolaMatriceB(G, Z2_acqua);"
- "B_couple_side2_acqua = calcolaMatriceB(G, Z1_acqua);"
- "[Zin_side1_acqua, FTT_side1_acqua, FTR_side1_acqua] = calcolaFunzioniDiTrasferimento(B_side1_acqua, Z1_acqua, Zel);"
- "[Zin_side2_acqua, FTT_side2_acqua, FTR_side2_acqua] = calcolaFunzioniDiTrasferimento(B_side2_acqua, Z2_acqua, Zel);"
- "[Zin_couple_side1_acqua, FTT_couple_side1_acqua, FTR_couple_side1_acqua] = calcolaFunzioniDiTrasferimento(B_couple_side1_acqua, Z1_acqua, Zel);"
- "[Zin_couple_side2_acqua, FTT_couple_side2_acqua, FTR_couple_side2_acqua] = calcolaFunzioniDiTrasferimento(B_couple_side2_acqua, Z2_acqua, Zel);"
- "index_min = (Zin_side1_acqua{1} == min(Zin_side1_acqua{1}));"
- "index_max = (Zin_side1_acqua{1} == max(Zin_side1_acqua{1}));"
- "fmin = f(1,index_min);"
- "fmax = f(1,index_max);"
- "Keff_acqua = ((fmax^2) - (fmin^2))/(fmax^2);"
- 'if (mezziStandard) Keff = "\tAria: Keff^2 = " + num2str(Keff_aria) + "\n\tAcqua: Keff^2 = " + num2str(Keff_acqua); else Keff = num2str(Keff_custom); end'